{% extends "channel/base.html" %}
{% load i18n %}

{% block content %}
    <script type="text/javascript" src="{% static 'scripts/libs/spin.js' %}"></script>

    <div class="col-xs-12 col-sm-12 col-md-12" style="padding-top:15px;">
        <ol class="breadcrumb">
            <li class="active">{% trans "Update links" %}</li>
        </ol>
    </div>
    {% if messages %}
        <div class="col-xs-12 col-sm-12 col-md-12">
            <div class="alert alert-danger" style="padding:10px;">
                {% for message in messages %}
                    {{message}}
                {% endfor %}
            </div>
        </div>
    {% endif %}<!--end error alert-->
    <div class="col-xs-12 col-sm-12 col-md-12">
        <div id="spinnerbar" align="center"></div>
        <form id="notification_edit_form" class="form-horizontal" method="post"  enctype="multipart/form-data" action="{% url 'site_notification_link_update' %}">{% csrf_token %}
            <div class="form-group">
                <label class="col-xs-4 col-sm-3 col-md-2 control-label">{% trans "Channel" %}</label>
                <div class="col-xs-8 col-sm-9 col-md-10" style="padding-top:5px;">
                    {{channel}}
                </div>
            </div><!--end channel name-->
            <div class="form-group">
                <label class="col-xs-4 col-sm-3 col-md-2 control-label">{% trans "Playlist" %}</label>
                <div class="col-xs-8 col-sm-9 col-md-10" style="padding-top:5px;">
                    {{playlist.name}}
                    <input type="hidden" name="playlistId_hid" value="{{playlist.id}}"></input>
                </div>
            </div><!--end playlist name-->
            <div id="master">
            {% for link in link %}
                <div id="link_master_{{forloop.counter}}" class="form-group">
                    <label class="col-xs-4 col-sm-3 col-md-2 control-label">{% trans "Link name" %}</label>
                    <div class="col-xs-8 col-sm-9 col-md-10 well" style="padding:0px; margin-bottom:10px;">
                        <div class="col-xs-12 col-sm-12 col-md-12">
                            <div class="row">
                                <div id="div_url_{{forloop.counter}}" class="col-xs-12 col-sm-12 col-md-12" style="padding:10px;">
                                    <input id="url_{{forloop.counter}}" class="form-control" type="text" value="{{link.url}}" onblur="check_url_type(this.value, {{forloop.counter}});"/>
                                    <input id="url_hid{{forloop.counter}}" type="hidden" value="{{link.url}}"/>
                                    <input id="id_hid{{forloop.counter}}" type="hidden" value="{{link.id}}"/>
                                </div>
                                <div class="col-xs-12 col-sm-12 col-md-12" style="padding-left:10px; padding-right:0px;">
                                    <div class="col-xs-12 col-sm-3 col-md-2" style="padding-bottom:10px; padding-left:0px; margin-right:-5px; padding-right:5px;">
                                        <image id="img_{{forloop.counter}}" src="{{link.thumbnail_url}}" style="width:100%"/>
                                    </div>
                                    <div class="col-xs-12 col-sm-9 col-md-10" style="padding:0px;">
                                        <div class="form-group" style="margin-bottom:10px;">
                                            <label class="col-xs-2 col-sm-2 col-md-1 control-label" style="padding-right:0px; padding-left:0px;">Title:</label>
                                            <div class="col-xs-10 col-sm-10 col-md-11" style="padding-right:20px;">
                                                <input id="name_{{forloop.counter}}" value="{{link.name}}" type="text" class="form-control"/>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-xs-12 col-sm-9 col-md-10" style="padding:0px;">
                                        <div class="form-group" style="margin-bottom:10px;">
                                            <label class="col-xs-2 col-sm-2 col-md-1 control-label" style="padding-right:0px; padding-left:0px;"></label>
                                            <div class="col-xs-10 col-sm-10 col-md-11" style="padding-right:20px;">
                                                <a href="{% url 'site_notification_delete' playlist.id link.id %}" onclick="return confirm('Are you sure you want to delete?');" class="btn btn-danger"><span class="glyphicon glyphicon-trash"></span> {% trans "Delete Link" %}</a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div><!--end link name-->
            {% endfor %}
            </div>
            <input id="result" name="result" type="hidden"/>
            <div class="form-group">
                <div class="col-xs-8 col-sm-9 col-md-10 col-xs-offset-4 col-sm-offset-3 col-md-offset-2">
                    <a id="submitBtn" class="btn btn-primary" onclick="submit_link();"><span class="glyphicon glyphicon-ok-circle"></span> {% trans "Submit" %}</a>
                    <a id="cancelBtn" class="btn" href="{% url 'site_notification_playlist' user.id %}"><span class="glyphicon glyphicon-remove-circle"></span> {% trans "Cancel" %}</a>
                </div>
            </div>
        </form>
    </div><!--end col-xs-12 col-sm-12 col-md-12-->
                        
    <script type="text/javascript">
        var warning_support_text = '{% trans "Support only Youtube and Dailymotion" %}';
        var dead_link_text = '{% trans "Can not get information from link" %}';
    </script>
    <script type="text/javascript" src="{% static 'scripts/curator/curator_notification_link.js' %}"></script>
{% endblock %}
