{% extends "channel/base.html" %}
{% load i18n %}
{% load static %}

{% block head %}
    <script type="text/javascript" src="https://raw.githubusercontent.com/swfobject/swfobject/master/swfobject/swfobject.js"></script>
    <script type="text/javascript" src="{% static 'scripts/admin/admin_monitor.js' %}"></script>
    <script type="text/javascript" src="{% static 'scripts/libs/spin.js' %}"></script>
    <script type="text/javascript">
        var SEND_MONITOR_LOG_URL = "{% url 'channel:channel_log_monitor' %}";
        var MEDIA_URL = "{{MEDIA_URL}}";
    </script>
{% endblock %}

{% block content %}
    {% for i in result %}
        <div class="col-xs-12 col-sm-6 col-md-4 col-lg-3" style="border:1px solid; padding:5px;">
            {{i.name}}<br>
            {% if i.status == 'G' %}
                <span id="status_{{i.id}}" class="label label-success pull-right" style="padding:5px;">Good at {{i.update_at}}</span>
            {% elif i.status == 'R' %}
                <span id="status_{{i.id}}" class="label label-danger pull-right" style="padding:5px;">Restart at {{i.update_at}}</span>
            {% elif i.status == 'B' %}
                <span id="status_{{i.id}}" class="label label-default pull-right" style="padding:5px;">Bad at {{i.update_at}}</span>
            {% else %}
                <span id="status_{{i.id}}" class="label label-info pull-right" style="padding:5px;">no status</span>
            {% endif %}
            <div id="div_{{i.id}}">
                <embed id="{{i.id}}" name="{{i.id}}" type="application/x-shockwave-flash" src="{% static 'jwplayer/player.swf' %}" quality="low" allowscriptaccess="always" allowfullscreen="true" flashvars="autostart=false&file={{i.url}}&provider=http&http.startparam=start&stretching=exactfit&viral.onpause=false&viral.oncomplete=false" style="padding:5px;" width="100%" height="100%">
            </div>
            <button id="Gbtn_{{i.id}}" type="button" class="btn btn-success btn-sm" onclick="send_monitor_log('{{i.id}}', 'G')">Good</button>
            <button id="Rbtn_{{i.id}}" type="button" class="btn btn-danger btn-sm" onclick="monitor_confirm('{{i.id}}', 'R')">Restart</button>
            <button id="Bbtn_{{i.id}}" type="button" class="btn btn-default btn-sm" onclick="monitor_confirm('{{i.id}}', 'B')">Bad</button>
        </div>
    {% endfor %}
{% endblock %}
